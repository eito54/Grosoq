# Grosoq Project Handover Document

このドキュメントは、プロジェクト「Grosoq（旧：Gemisoku-GUI）」の現状と、これまでの開発経緯を次のセッションやAIに引き継ぐためのものです。

## 1. プロジェクト概要
- **名称**: Grosoq（グロソク）
- **目的**: マリオカート8DXのレース結果画面をAI（Groq/Gemini/OpenAI）で解析し、リアルタイムで配信オーバーレイに反映するデスクトップアプリ。
- **主要スタック**: Electron, React 19, Tailwind CSS, Framer Motion, Groq API (Llama 3 Vision).

## 2. 実装済み重要機能 (最新)

### 2.1 UI/UX 刷新
- **サイバーパンク・テーマ**: ダークモード、スキャンライン、発光エフェクト等のSF/Cyberpunk的視覚効果を各所に適用。
- **カスタムダイアログ**: ブラウザ標準の `confirm()` を廃止し、`Framer Motion` を用いたアニメーション付きの「Grosoq Confirm Modal」および「What's New Modal」を実装。
- **透過オーバーレイ**: OBS等の配信ソフトで取り込むための `public/overlay/index.html` の背景を完全透過 (`rgba(0,0,0,0)`) に設定済み。

### 2.2 データ完全性と利便性
- **Dirtyチェックロジック**: 設定変更中にタブを移動しようとすると、警告を出す仕組み。`isDirty` フラグで管理。
- **プレイヤーマッピングの強化**: 
    - AI解析結果のプレイヤー名を正規化（不可視文字や空白の除去）。
    - ユーザーが手動で作成したマッピングを最優先し、新しいプレイヤーには既存のチーム名を継承する仕組み。
    - スコア更新時にGUI側でもマッピング情報を自動リフレッシュ。
- **リセット機能**: スコアリセットボタンで、スコアデータとマッピングデータの両方を完全に初期化。

### 2.3 自動アップデート & リリースノート
- **Whats New 機能**: 自動アップデート後の初回起動時に、保存された `releaseNotes` を元に更新内容をスタイリッシュなモーダルで表示。

## 3. テクニカル・コンテキスト

### 3.1 ファイル構造
- `src/main/api-manager.ts`: AI解析ロジック、マッピング生成/適用を統括。
- `src/main/ipc-handlers.ts`: 自動アップデート (`electron-updater`)、Config管理、解析トリガーの通信を担当。
- `src/renderer/src/App.tsx`: メインUI。状態管理、モーダル制御、タブ切り替えロジックを保有。
- `src/main/server.ts`: OBSオーバーレイ用のEmbedded Server。リセットAPI等を含む。

### 3.2 構成の注意点
- **リポジトリ**: `https://github.com/eito54/Grosoq.git` に移行済み。
- **フォルダ名**: 親フォルダを `Grosoq` にリネームすることを予定（現在 `Gemisoku-GUI`）。
- **AIプロバイダー**: 現在は Groq (Llama 3/4 系) をメインに最適化。

## 4. 次のステップへの推奨
1. **リネーム後の起動確認**: フォルダ名変更後にファイルパス等の不整合がないか確認。
2. **多言語化**: UIの日本語化は進んでいるが、設定項目の一部などはまだ英語の可能性がある。
3. **更なるカスタマイズ**: `ConfirmModal` 等のデザインを他（Aboutページなど）にも展開。

---
*Last Updated: 2026-01-08*
